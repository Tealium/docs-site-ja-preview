
{
    "kind": "term",
    "name": "iq_tabs_consent_integrations",
    "count": 7,
    "items": [

    
        {
            "weight": "465",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/about/",
            "title": "同意統合について",
            "body":"<p>新しいConsent Enforcement Frameworkは、Tealium iQ Consent Integrationsの主要な機能であり、Tealium iQ Tag Managementの外部でキャプチャされた同意信号の強力で信頼性の高い強制を可能にします。この機能は、顧客の同意が得られないか曖昧な場合にトラッキングをブロックします。</p><p>Tealium iQ Consent Integrationsは、サポートされている同意管理プラットフォーム（CMP）に対して、オプトイン（GDPRスタイル）とオプトアウト（CCPAスタイル）の強制パターンの両方を提供します。統合は、ほとんどのCMPまたはカスタムソリューションをサポートするテンプレートの形式で記述することができます。</p><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>Tealium iQ Consent Integrationsは、最新のutagバージョン4.49に依存しています。以前のバージョンでサポートを有効にするには、<strong>uTag Loader</strong>テンプレートを編集し、<code>##UTGEN##</code>publish engine flagの下に<code>##UTCM##</code>を追加します。</p><p>以下の用語は、同意統合フレームワークに関連しています：</p><ul><li><strong>目的</strong> - あなたのウェブサイトのユーザーが同意（または同意を拒否）できる特定のデータ使用目的。</li><li><strong>目的グループ</strong> - 目的のリスト。タグが割り当てられる同意目的のグループの形での強制ポリシーの表現。</li><li><strong>免除</strong> - 強制が必要ないケースで、同意決定に基づいてブロックする必要のないタグのケース。強制免除は、同意統合強制ルールが適用されない場合の動作とは異なります。明示的な免除がない限り、または一致する同意統合と適切な同意決定がない限り、タグは発火することは許可されません。</li><li><strong>強制ルール</strong> - 同意統合または免除を強制するタイミングを決定するルール。</li><li><strong>同意決定</strong> - 同意された目的の配列。同意決定は<code>type</code>属性で決定され、ユーザーがアクティブな決定を下したかどうか（<code>implicit</code>）または下していないかどうか（<code>explicit</code>）によります。</li><li><strong>暗黙の決定</strong> - ユーザーの行動から推測される決定。サイトを訪問することで、ユーザーはサイトのプライバシーポリシーで説明されている必要なタグに同意します。ユーザーは自分のデータの販売に反対することができますが、デフォルトではこれが有効になっています（暗黙の&rsquo;OK、私のデータを共有/販売する&rsquo;の決定があります）。</li><li><strong>明示的な決定</strong> - ユーザーがどのトラッキングに同意するかについての明確で正確な同意決定。</li><li><strong>統合</strong> 特定のCMPから同意決定をキャプチャする機能と構成（事前ロードまたはカスタム）のセット。統合は目的グループに関連付けられています。</li></ul><h2 id=\"仕組み\">仕組み</h2><p>Tealium iQ Consent Integrationsを使用すると、サポートされている非Tealiumの同意管理プラットフォームと統合できます。あなたのCMPは、必要に応じてエンドユーザーに目的ベースの同意を求め、そのユーザーの同意決定をキャプチャしてストレージします。統合がアクティブな場合、タグは目的グループ内の目的に割り当てられる必要があります。目的に同意されると、その目的に割り当てられたタグをトリガーすることができます。</p><p>各同意統合は、基礎となるフレームワークに対して、単一のCMPとどのように通信するかを指示します。一度にアクティブにできる統合は1つだけです。ただし、必要に応じて<strong>強制ルール</strong>を使用して、複数のアクティブな統合を条件付きで適用し、競合を避けることができます。</p><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>ページにCMPを注入するタグは、Tealium iQ Consent Integrationと互換性がありません。統合は、タグがロードされる前にCMPからの信号を必要とします。Consent IntegrationsとあなたのCMPを統合するには、PreloaderまたはDOM Ready拡張機能を使用するか、CMPをTealium iQの外部に追加します。</p><p>Tealium iQダッシュボードでサポートされているCMPとの統合を構成するか、<strong>カスタムテンプレート</strong>を編集してカスタム統合を作成することができます。</p><h2 id=\"サポートされている統合\">サポートされている統合</h2><p>現在サポートされている統合の完全なリストについては、<a href=\"/iq-tag-management/consent-integrations/supported-vendors/\">Supported Vendor Integrations</a>を参照してください。</p><h2 id=\"タグの再発火\">タグの再発火</h2><p>各タグには、<strong>Map Tags</strong>画面で<strong>Tag Refire</strong>スイッチがあります：</p><figure><a class=\"slb\" href=\"/images/early-access/map-tags.png\"><img src=\"https://docs.tealium.com/images/early-access/map-tags.png\"         alt=\"map_tags.png\"         title=\"map_tags.png\" width=\"790\" height=\"417\"/>    </a></figure><p>このオプションを有効にすると、タグは各ユーザーアクションごとに最大2回トリガーすることができます（一度は暗黙の決定で、一度は明示的な決定で）。ただし、マップされた目的が同意されていない場合、タグはトリガーされません。</p><p>ほとんどのタグは、これらのケースのそれぞれで同意がある場合、再度トリガーする必要はありません。タグを再度トリガーすると、一部のケースで二重トラッキングが発生する可能性があり、これは避けるべきです。</p><p>Customer Data Hubの顧客（特にEventStreamの顧客）は、Collectタグを再発火させて、<code>purposes_with_consent_unprocessed</code>属性を使用することで、同じイベントに対してサーバーサイドのアクティベーションが再発火されないようにすることができます。<code>purposes_with_consent_unprocessed</code>属性を使用すると、同じイベントに対して2回トリガーすることなく、サーバーサイドのアクティベーションを可能な限り早くトリガーすることができます。</p><h2 id=\"サーバーサイド属性---consent-integrationsとcollectの使用\">サーバーサイド属性 - Consent IntegrationsとCollectの使用</h2><p>Tealium Collectは、他のすべてのタグと同様に、同意された目的にマッピングする必要があります。ただし、<code>refiringAllowed</code>オプションにより、新しい決定に対してタグを再発火することができます。このプロセスは、タグがさまざまなサーバーサイドの目的に使用されており、利用可能なサーバーサイドのフィルタとロジックが使用されて、信号が適切にのみ処理されるようにしながら、再発火を許可することを示しています。</p><p>使用するサーバーサイドツールによりますが、Collectタグは、各イベントに対して以下のイベントレベルの属性でトリガーされます：</p><ul><li><code>tci.purposes_with_consent_unprocessed</code>（再発火あり）</li><li><code>tci.purposes_with_consent_all</code>（再発火なし）</li></ul><h2 id=\"tealium-iq内での同意決定のアクセス\">Tealium iQ内での同意決定のアクセス</h2><p>同意決定（<code>ConsentDecision</code>）は、各イベントの<code>b object</code>で以下の属性に提供され、タグで使用でき、<a href=\"/client-side-tags/tealium-collect-tag/\">Collect tag</a>によって自動的に送信されますが、拡張機能では利用できません。</p><ul><li><code>tci.consent_type</code>  - ConsentDecisionの<code>type</code>属性（ <code>implicit</code>または<code>explicit</code>）。</li><li><code>tci.purposes_with_consent_all</code>  - 完全な<code>ConsentDecision</code>配列、すべての許可された目的。</li><li><code>tci.purposes_with_consent_processed</code> - 処理された同意された目的の配列。</li><li><code>tci.purposes_with_consent_unprocessed</code> - 処理されていない同意された目的の配列。</li></ul><h3 id=\"拡張機能からの同意決定へのアクセス\">拡張機能からの同意決定へのアクセス</h3><p><code>tealiumCmpIntegration.GetCurrentConsentDecision()</code>は現在の同意決定を返し、拡張機能から同意決定にアクセスするために使用できます。</p><p>次のコマンドは、現在の同意決定をすべての後続の拡張機能の<code>b object</code>に追加し、それを<code>tci.*</code>属性とともにタグに渡します：</p><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-js\" data-lang=\"js\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">b</span>.<span style=\"color:#a6e22e\">currentConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">getCurrentConsentDecision</span>()</span></span></code></pre></div><h2 id=\"javascriptコンソールの使用\">JavaScriptコンソールの使用</h2><p>アクティブな場合、utag.js（Tealium iQ）が実装されているページのJavaScriptコンソールで同意統合と対話できます。JavaScriptコンソールを使用すると、CMPから取得される現在の同意決定を取得できます。同意決定はTealiumによってキャッシュされることはなく、常に最新の状態を保証します。</p><p>詳細については、関連する<a href=\"/iq-tag-management/consent-integrations/validate-and-debug/\">デバッグドキュメンテーション</a>を参照してください。</p>"
        }  

    , 
        {
            "weight": "466",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/consent-integrations-decision-flow/",
            "title": "同意統合の決定フロー",
            "body":"<p>Tealium iQ Consent Integrationsは、サポートされている同意管理プラットフォーム（CMP）に対して、オプトイン（GDPRスタイル）とオプトアウト（CCPAスタイル）の強制パターンの両方を提供します。以下の図に示す同意統合の決定フローでは、これらの強制パターンでユーザーの同意決定がどのように処理されるかを示しています。</p><h3 id=\"同意統合の同意フロー\">同意統合の同意フロー</h3><figure><a class=\"slb\" href=\"/images/iq-tag-management/consent-integrations-consent-flow.png\"><img src=\"https://docs.tealium.com/images/iq-tag-management/consent-integrations-consent-flow.png\"         alt=\"Consent Integrations decision flow\"         title=\"Consent Integrations decision flow\" width=\"1500\" height=\"2000\"/>    </a></figure><h3 id=\"11---タグの詳細を発火\">1.1 - タグの詳細を発火</h3><p><strong>各タグとイベントについて：</strong></p><figure><a class=\"slb\" href=\"/images/iq-tag-management/consent-integrations-fire-tags.png\"><img src=\"https://docs.tealium.com/images/iq-tag-management/consent-integrations-fire-tags.png\"         alt=\"Consent Integrations fire tags detail \"         title=\"Consent Integrations fire tags detail\"/>    </a></figure><h2 id=\"オプトインモデル\">オプトインモデル</h2><p>Tealium iQは、CMPからの同意決定が受け取られるまで、タグを発火させたりクッキーを構成したりしません。期待されるCMPがページ上でアクティブでない場合、またはTealium iQが同意されていない場合、Tealium iQは実行されず、タグは発火されません。</p><p>Tealium iQがロードされたときに同意決定が見つからない場合、Tealium iQの同意統合は、決定が見つかるまでポーリングします。</p><p>CMPからの同意決定が受け取られるまで、すべてのイベントは、決定が見つかったら処理されるようにキューに入れられます。同意決定が受け取られない場合、イベントは処理されません。</p><p>CMPから同意決定（<code>implicit</code>または<code>explicit</code>）が利用可能な場合、以下のアクションがTealium iQ Consent Integrationによって開始されます：</p><ul><li>最初にTealium iQが実行可能かどうかを確認します。</li><li>Tealium iQが実行可能であれば、各タグが実行可能かどうかを確認します。</li><li>タグが実行可能であれば、キューに入れられたすべてのイベントに対して同意に基づいてタグをトリガーします。</li></ul><p>同意決定が暗黙的な場合、イベントは初めてキューに入れられ、暗黙的な同意を持つタグがトリガーされます。ユーザーがその後明示的な同意決定を行うと、これらのキューに入れられたイベントは、新たに同意されたタグを考慮して再処理されます。Tealium iQ Consent Integrationは、明示的な決定が見つかるまで検索します。</p><p>同意決定が明示的な場合、すべてのキューは空になり、ポーリングは停止します。暗黙的な同意で発火されたタグは、明示的な同意決定が処理されるときに再発火されません（タグの再発火が有効で、処理する新たな同意目的がある場合を除く）。</p><p>ユーザーがインタラクティブなCMPレイヤーを再度開き、新たな明示的な同意決定を行うと、以前のイベントは新たな同意決定で再処理されません。</p><p>Tealium iQが最初にロードされた後に処理される新しいイベントについては、新しい同意決定がCMPから取得され、各イベントがTealium iQによって処理されるたびに、CMPが普遍的な真実の源として扱われることを確認します。</p><h2 id=\"オプトアウトモデル\">オプトアウトモデル</h2><p>オプトアウトモデルはオプトインモデルに似ていますが、明示的な決定はポーリングされず、デフォルトの構成（CCPA/CPRAスタイル）よりも制限的です。</p>"
        }  

    , 
        {
            "weight": "467",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/manage/",
            "title": "同意統合と目的グループの管理",
            "body":"<p>Tealium iQタグ管理ダッシュボードでは、Consent Integrations画面で同意統合を追加し、構成することができます。</p><h2 id=\"統合の追加\">統合の追加</h2><p>以下の手順に従って統合を追加します：</p><ol><li><strong>iQタグ管理 &gt; Consent Integrations</strong>に移動します。</li><li><strong>+ 統合を追加</strong>をクリックして、統合構成画面を開きます。</li></ol><h3 id=\"ステップ1統合の構成\">ステップ1：統合の構成</h3><ol><li><strong>統合の構成</strong>スライドアウトで、統合にわかりやすい名前を入力します。</li><li><strong>ベンダー</strong>リストからベンダーを選択します。ベンダーの選択によっては、追加のフィールドが必要になることがあります。通常は、統合したいCMP構成の識別子です。</li><li>（オプション）デフォルトのベンダーカテゴリーで統合を構成するには、<strong>{ベンダー}のデフォルトカテゴリーで新しい目的グループを作成</strong>を選択します。</li><li>説明を入力します。</li><li><strong>次へ</strong>をクリックします。</li></ol><h3 id=\"ステップ2強制ルール\">ステップ2：強制ルール</h3><p>ドロップダウンリストを使用して新しいルールを作成するか、既存のルールを選択します。このルールは、同意統合をいつ強制するかを決定します。</p><p>新しいルールを作成するには：</p><ol><li><strong>+ 新しいルール</strong>をクリックします。</li><li><strong>ルールを追加</strong>スライドアウトで、ロードルールの<strong>タイトル</strong>を追加し、必要に応じて<strong>ノート</strong>を追加します。</li><li>ドロップダウンリストから<strong>変数</strong>と<strong>演算子</strong>を選択し、<strong>値</strong>を入力します。</li><li>ANDロジックを使用して別の条件を追加するには、以下のいずれかを行います：<ul><li>デフォルトの条件文の隣にある**+**をクリックします。</li><li>行メニューをクリックし、<strong>行の複製</strong>を選択して、ANDロジックを使用した条件文のコピーを作成します。<br>複製した条件文は必要に応じて編集できます。</li></ul></li><li>ORロジックを使用して別の条件を追加するには、以下のいずれかを行います：<ul><li><strong>+OR</strong>をクリックします。</li><li>条件メニューをクリックし、<strong>複製</strong>を選択して、ORロジックを使用した条件のコピーを作成します。複製した条件は新しい条件を作成するために編集できます。</li></ul></li><li>条件から条件文を削除するには、行メニューをクリックし、<strong>行の削除</strong>を選択します。</li><li><strong>完了</strong>をクリックします。</li></ol><h3 id=\"ステップ3公開場所\">ステップ3：公開場所</h3><ol><li>この統合の強制を適用する環境を選択します。</li><li><strong>次へ</strong>をクリックします。</li></ol><h3 id=\"ステップ4目的グループ\">ステップ4：目的グループ</h3><ol><li><strong>目的グループ</strong>ドロップダウンリストから統合の目的グループを選択します。<ul><li>ステップ1でデフォルトのベンダーカテゴリーで統合を構成することを選択した場合は、以下の手順を完了し、統合のストレージに進みます：<ol><li>リストから**&lt;ベンダー&gt; デフォルト**を選択します。</li></ol></li><li>ステップ4でデフォルトのベンダーカテゴリーで統合を構成することを選択しなかった場合：<ol><li>ドロップダウンリストから**+ 新しい目的グループ**を選択します。</li><li><strong>新しい目的グループ</strong>ダイアログで、<strong>目的グループを作成</strong>をクリックします。<strong>新しい目的グループ</strong>画面にリダイレクトされます。<strong>統合を追加</strong>ウィザードの進行状況はストレージされ、目的グループの構成が完了した後にリダイレクトされます。</li><li><strong>目的グループ</strong>ダイアログで、<a href=\"#add-a-purpose-group\">目的グループを追加</a>セクションの手順を完了して目的グループを追加します。</li><li><strong>統合を追加</strong>ウィザードで、<strong>目的グループ</strong>ドロップダウンリストから目的グループを選択します。統合の構成を完了するために、<strong>統合を追加</strong>ウィザードにリダイレクトされます。</li></ol></li></ul></li><li><strong>ストレージ</strong>をクリックして新しい統合を作成します。</li></ol><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>OneTrustのデフォルトベンダーカテゴリーを初めて使用する場合は、統合を作成した後、<a href=\"#edit-a-purpose-group\">目的グループの編集</a>の手順に従って、タグを<strong>デフォルト</strong>目的グループに割り当てます。</p><h2 id=\"目的グループの管理\">目的グループの管理</h2><p>目的グループを管理するには、<strong>iQタグ管理 &gt; Consent Integrations &gt; Purpose Groups</strong>タブに移動します。</p><h3 id=\"目的グループの追加\">目的グループの追加</h3><p>以下の手順に従って目的グループを追加します：</p><ol><li><strong>iQタグ管理 &gt; Consent Integrations</strong>に移動します。</li><li><strong>+ 目的グループを追加</strong>をクリックして、目的グループ構成モーダルを開きます。</li></ol><h4 id=\"ステップ1目的グループ\">ステップ1：目的グループ</h4><ol><li>名前と説明を入力します。</li><li><strong>次へ</strong>をクリックします。</li></ol><h4 id=\"ステップ2目的\">ステップ2：目的</h4><ol><li>目的の名前と説明を入力します。各目的の名前は、統合するベンダーの同意カテゴリーの名前と一致する必要があります。</li><li>目的グループに複数の目的を作成することができます。目的グループにさらに目的を追加するには、<strong>+ 目的を追加</strong>をクリックします。</li><li><strong>次へ</strong>をクリックします。</li></ol><h4 id=\"ステップ3tealium-iqの目的\">ステップ3：Tealium iQの目的</h4><ol><li><strong>Tealiumタグ目的</strong>からTealium iQにマップする目的を選択します。Tealium iQはすべてのタグ操作を制御し、タグが機能するためには目的にマップする必要があります。</li><li><strong>次へ</strong>をクリックします。</li></ol><h4 id=\"ステップ4タグのマップ\">ステップ4：タグのマップ</h4><p>すべてのタグは、トリガーする前に目的にマップする必要があります。</p><ol><li>新しく作成した目的にタグをマップするには、各タグで<strong>割り当て/マップ</strong>をクリックし、ドロップダウンリストからそのタグにマップする目的を選択します。</li><li>各タグのタグ再発火を有効または無効にするには、<strong>タグ再発火</strong>列の<strong>OFF/ON</strong>ボタンを切り替えます。タグ再発火についての詳細は、<a href=\"/iq-tag-management/consent-integrations/about/#tag-refire\">タグ再発火</a>を参照してください。</li><li><strong>ストレージ</strong>をクリックして新しい目的グループを作成します。</li></ol><h3 id=\"目的グループの編集\">目的グループの編集</h3><p>以下の手順に従って目的グループを編集します：</p><ol><li>編集したい目的グループの横にあるオプションアイコンをクリックします。</li><li><strong>編集</strong>をクリックして、目的グループ構成を開きます。</li><li>編集したいセクションのタブをクリックします。新しいデフォルト目的グループにタグをマップするには、<strong>タグのマップ</strong>をクリックします。</li><li><strong>ストレージ</strong>をクリックして変更をストレージします。</li></ol>"
        }  

    , 
        {
            "weight": "470",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/supported-vendors/",
            "title": "同意の統合 - サポートされているベンダーの構成",
            "body":"<h2 id=\"動作原理\">動作原理</h2><p>Tealium iQ Consent Integrationsは、さまざまな同意管理プラットフォーム（CMP）との統合をサポートしています。サポートされている同意管理プラットフォーム（CMP）またはウェブページのユーザーインターフェースから、関連するベンダー固有の情報にアクセスできます。このドキュメントを信頼性があり使いやすいものにするため、このセクションではウェブページからベンダー固有の情報を取得する手順のみをカバーしています。各パートナーCMPのユーザーインターフェースでベンダーIDと目的を取得する手順については、各CMPのドキュメントを参照してください。</p><p>ウェブページから関連する情報を取得するには、次の手順に従ってください。</p><ol><li>CMPが実装されているウェブサイトを訪れます。</li><li>すべてのトラッキングを許可します。</li><li>開発者ツールのJavaScriptコンソールを開きます。</li><li>下記のコードスニペットからCMP固有のコードをコンソールに貼り付けます。</li><li>表示された<strong>ベンダーID</strong>、<strong>目的キー</strong>、<strong>目的名</strong>をConsent Integrationに入力します。</li></ol><p class=\"tip\"><i class=\"fa fa-info-circle\"></i>同意の決定を更新した後に最新の解釈を表示するには、コードを再貼り付けしてください。</p><h2 id=\"統合固有の手順とコードスニペット\">統合固有の手順とコードスニペット</h2><h3 id=\"didomi\">Didomi</h3><p>このスニペットを<a href=\"https://didomi.io\">didomi.io</a>でテストするか、<a href=\"#how-it-works\">上記の手順</a>に従ってウェブサイトでテストして、統合に必要な情報の互換性と取得方法を確認します。</p><p>Didomiの統合では、<strong>ベンダー</strong>を<strong>目的</strong>として使用します。</p><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>Didomiは、暗黙の同意が必要な目的やベンダーを返さないため、これは既知のバグです。このバグが修正されるまでの回避策として、この統合では常に<code>always_consented</code>目的キーを出力同意決定に追加して、暗黙のトリガリングを許可します。</p><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-js\" data-lang=\"js\"><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>;(<span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">didomiIntegration</span> (window) {</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// CMP specific functionality and labels</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">||</span> {}</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;Didomi&#39;</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpIntegrationVersion</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;didomi-1.0.1&#39;</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToLookupObject</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToLookupObject</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>window.<span style=\"color:#a6e22e\">Didomi</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getConfig</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;function&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getConfig</span>().<span style=\"color:#a6e22e\">notice</span>.<span style=\"color:#a6e22e\">type</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#e6db74\">&#39;optin&#39;</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>window.<span style=\"color:#a6e22e\">Didomi</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getUserStatus</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;function&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getConfig</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;function&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">=</span> {}</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getUserStatus</span>()</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">vendorInfo</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getVendors</span>()</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">shouldConsentBeCollected</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">shouldConsentBeCollected</span>()</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">cmpRawOutput</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>window.<span style=\"color:#a6e22e\">Didomi</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getConfig</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;function&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#e6db74\">&#39;&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">id</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">Didomi</span>.<span style=\"color:#a6e22e\">getConfig</span>().<span style=\"color:#a6e22e\">app</span>.<span style=\"color:#a6e22e\">deploymentId</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">id</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;&#39;</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// do more checks than strictly necessary to confirm expectations</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">purposes</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">vendors</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">purposes</span>.<span style=\"color:#a6e22e\">global</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">vendors</span>.<span style=\"color:#a6e22e\">global</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">toString</span>.<span style=\"color:#a6e22e\">call</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">purposes</span>.<span style=\"color:#a6e22e\">global</span>.<span style=\"color:#a6e22e\">enabled</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;[object Array]&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">toString</span>.<span style=\"color:#a6e22e\">call</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">vendors</span>.<span style=\"color:#a6e22e\">global</span>.<span style=\"color:#a6e22e\">enabled</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;[object Array]&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">vendorInfo</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;object&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">shouldConsentBeCollected</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;boolean&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">true</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#66d9ef\">true</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">shouldConsentBeCollected</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#66d9ef\">false</span> <span style=\"color:#75715e\">// false after an explicit decision is made</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// Didomi handles checking each vendor&#39;s required purposes</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#66d9ef\">true</span>) <span style=\"color:#66d9ef\">return</span> []</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// enforce strings, even for IAB vendor ids</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">const</span> <span style=\"color:#a6e22e\">decision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">userStatus</span>.<span style=\"color:#a6e22e\">vendors</span>.<span style=\"color:#a6e22e\">global</span>.<span style=\"color:#a6e22e\">enabled</span>.<span style=\"color:#a6e22e\">map</span>(<span style=\"color:#66d9ef\">function</span> (<span style=\"color:#a6e22e\">vendorId</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">return</span> String(<span style=\"color:#a6e22e\">vendorId</span>)</span></span><span style=\"display:flex;\"><span>    })</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">decision</span>.<span style=\"color:#a6e22e\">push</span>(<span style=\"color:#e6db74\">&#39;always_consented&#39;</span>)</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">decision</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpConvertResponseToLookupObject</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">allowedVendors</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>)</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">allVendors</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">vendorInfo</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">lookupObject</span> <span style=\"color:#f92672\">=</span> {}</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// WORKAROUND to allow implicit triggering until the Didomi bug is fixed</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">lookupObject</span>.<span style=\"color:#a6e22e\">always_consented</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;Always consented (to allow strictly needed triggering)&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">allVendors</span>.<span style=\"color:#a6e22e\">forEach</span>(<span style=\"color:#66d9ef\">function</span> (<span style=\"color:#a6e22e\">vendorObject</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">allowedVendors</span>.<span style=\"color:#a6e22e\">indexOf</span>(String(<span style=\"color:#a6e22e\">vendorObject</span>.<span style=\"color:#a6e22e\">id</span>)) <span style=\"color:#f92672\">===</span> <span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span>) <span style=\"color:#66d9ef\">return</span></span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">lookupObject</span>[<span style=\"color:#a6e22e\">vendorObject</span>.<span style=\"color:#a6e22e\">id</span>] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">vendorObject</span>.<span style=\"color:#a6e22e\">name</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;iab-vendor-&#39;</span> <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">vendorObject</span>.<span style=\"color:#a6e22e\">id</span></span></span><span style=\"display:flex;\"><span>    })</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">lookupObject</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>, <span style=\"color:#a6e22e\">tiqGroupName</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#66d9ef\">true</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;tiq-group-name-missing&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">allowedGroups</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>)</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">allowedGroups</span>.<span style=\"color:#a6e22e\">indexOf</span>(<span style=\"color:#a6e22e\">tiqGroupName</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span>})(window)</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Debugging / development output - repaste the integration on your test pages each time you make a change to your consent state</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">outputString</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">`CMP Found: </span><span style=\"color:#e6db74\">${</span>window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> (</span><span style=\"color:#e6db74\">${</span>window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span>() <span style=\"color:#f92672\">?</span> <span style=\"color:#e6db74\">&#39;Opt-in&#39;</span> <span style=\"color:#f92672\">:</span> <span style=\"color:#e6db74\">&#39;Opt-out&#39;</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> Model)</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">Checks:</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - id:          </span><span style=\"color:#e6db74\">${</span>window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span>()<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - well-formed: </span><span style=\"color:#e6db74\">${</span>window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - explicit:    </span><span style=\"color:#e6db74\">${</span>window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span>(window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - group list:  </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">JSON</span>.<span style=\"color:#a6e22e\">stringify</span>(window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>()))<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - name lookup: </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">JSON</span>.<span style=\"color:#a6e22e\">stringify</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToLookupObject</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>()), <span style=\"color:#66d9ef\">null</span>, <span style=\"color:#ae81ff\">6</span>)<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">`</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">console</span>.<span style=\"color:#a6e22e\">log</span>(<span style=\"color:#a6e22e\">outputString</span>)</span></span></code></pre></div><h3 id=\"onetrust\">OneTrust</h3><p>このスニペットをhttps://onetrust.comでテストするか、<a href=\"#how-it-works\">上記の手順</a>に従ってウェブサイトでテストして、統合に必要な情報の互換性と取得方法を確認します。</p><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>OneTrustは、構成をプレビューするためのテストモードを提供しており、ベンダーIDに<code>-test</code>を追加することで有効化できます。統合を簡素化するため、OneTrust Consent Integrationsでは、ベンダーIDから<code>-test</code>サフィックスを削除します。シームレスな統合のために、ページで<code>-test</code>サフィックスを使用している場合でも、Tealium iQ Consent Integrations UIに<code>-test</code>を含まないベンダーIDを入力してください。Tealium iQ UIとアクティブな統合のベンダーIDが一致しない場合、Tealium iQ Tag Managementはクッキーを構成したり、ページ上でタグをトリガーしたりすることができません。</p><pre><code>;(function oneTrust (window) {  // allows simple adjustment of the name/id behavior  var useNamesInsteadOfKeys = false  // allow the safety check of the expected Vendor ID to be circumvented to simplify setup at the cost of increased risk  var disableVendorIdValidation = false  // CMP specific functionality and labels  window.tealiumCmpIntegration = window.tealiumCmpIntegration || {}  window.tealiumCmpIntegration.cmpName = 'OneTrust'  window.tealiumCmpIntegration.cmpIntegrationVersion = 'onetrust-2.0.1'  window.tealiumCmpIntegration.cmpFetchCurrentConsentDecision = cmpFetchCurrentConsentDecision  window.tealiumCmpIntegration.cmpFetchCurrentLookupKey = cmpFetchCurrentLookupKey  window.tealiumCmpIntegration.cmpCheckIfOptInModel = cmpCheckIfOptInModel  window.tealiumCmpIntegration.cmpCheckForWellFormedDecision = cmpCheckForWellFormedDecision  window.tealiumCmpIntegration.cmpCheckForExplicitConsentDecision = cmpCheckForExplicitConsentDecision  window.tealiumCmpIntegration.cmpCheckForTiqConsent = cmpCheckForTiqConsent  window.tealiumCmpIntegration.cmpConvertResponseToGroupList = cmpConvertResponseToGroupList  window.tealiumCmpIntegration.cmpConvertResponseToLookupObject = cmpConvertResponseToLookupObject  function cmpCheckIfOptInModel () {    var decision = cmpFetchCurrentConsentDecision()    if (decision && decision.ConsentModel && decision.ConsentModel.Name === 'opt-out') {      return false    }    return true  }  function cmpFetchCurrentConsentDecision () {    if (!window.OneTrust || typeof window.OneTrust.GetDomainData !== 'function') return false    var cmpRawOutput = window.OneTrust.GetDomainData()    cmpRawOutput.dataLayer = window.dataLayer    return cmpRawOutput  }  function cmpFetchCurrentLookupKey () {    // newer versions of OneTrust, starting at the end of 2022 no longer have cctId defined    // but this HTML attribute is the way OneTrust can tell    var scrapeOneTrustVendorId = function () {      var allScripts = document.getElementsByTagName('script')      var re = /\/otSDKStub&bsol;.js(&bsol;?.*)*$/      for (var i = 0; i < allScripts.length; i++) {        var isOneTrustScript = re.test(allScripts[i].src) // can be null        if (isOneTrustScript) {          var fullVendorId = allScripts[i].getAttribute('data-domain-script') // parse it from the script          return fullVendorId.split('-test')[0]        }      }      return 'error-not-found'    }    if (disableVendorIdValidation) {      // just return whatever Vendor ID is expected be active      return (window.tealiumCmpIntegration && window.tealiumCmpIntegration.map && Object.keys(window.tealiumCmpIntegration.map)[0]) || '(Vendor ID check disabled)' // just return whatever's mapped to short-circuit the check as a test    }    return scrapeOneTrustVendorId()  }  function cmpCheckForWellFormedDecision (cmpRawOutput) {    // treat things we don't understand as an opt-out    if (typeof cmpRawOutput !== 'object') return false    if (toString.call(cmpRawOutput.Groups) !== '[object Array]') return false    if (toString.call(cmpRawOutput.dataLayer) !== '[object Array]') return false    return true  }  function cmpCheckForExplicitConsentDecision (cmpRawOutput) {    // treat things we don't understand as an opt-out    if (toString.call(cmpRawOutput) !== '[object Array]') return false    // use the first entry as a proxy for all    if (cmpRawOutput && cmpRawOutput[0] && typeof cmpRawOutput[0].name === 'string') {      return true    }    return false  }  function cmpConvertResponseToLookupObject (cmpRawOutput) {    // convert from array of objects to object for easier lookups    var decisionString = ''    if (cmpCheckForWellFormedDecision(cmpRawOutput) !== true) return {}    for (var i = cmpRawOutput.dataLayer.length - 1; i >= 0; i--) {      if (['OneTrustGroupsUpdated', 'OneTrustLoaded'].indexOf(cmpRawOutput.dataLayer[i].event) !== -1) {        decisionString = cmpRawOutput.dataLayer[i].OnetrustActiveGroups        break      }    }    var permittedPurposeIds = decisionString.split(',').filter(function (group) {      return group !== ''    })    var permittedPurposesWithNames = {}    cmpRawOutput.Groups.forEach(function (groupInfo) {      if (permittedPurposeIds.indexOf(groupInfo.OptanonGroupId) !== -1) {        permittedPurposesWithNames[groupInfo.OptanonGroupId] = groupInfo.GroupName || 'ERROR-MISSING'      }    })    return permittedPurposesWithNames // keys are IDs, values are names  }  function cmpConvertResponseToGroupList (cmpRawOutput) {    var permittedPurposesWithNames = cmpConvertResponseToLookupObject(cmpRawOutput)    var keysOrValues = useNamesInsteadOfKeys ? 'values' : 'keys'    return Object[keysOrValues](permittedPurposesWithNames) // keys are IDs, values are names  }  function cmpCheckForTiqConsent (cmpRawOutput, tiqGroupName) {    // treat things we don't understand as an opt-out    if (cmpCheckForWellFormedDecision(cmpRawOutput) !== true) return false    tiqGroupName = tiqGroupName || 'tiq-group-name-missing'    var allowedGroups = cmpConvertResponseToGroupList(cmpRawOutput)    return allowedGroups.indexOf(tiqGroupName) !== -1  }})(window)// Debugging / development output - repaste the integration on your test pages each time you make a change to your consent statevar outputString = `CMP Found: ${window.tealiumCmpIntegration.cmpName} (${window.tealiumCmpIntegration.cmpCheckIfOptInModel() ? 'Opt-in' : 'Opt-out'} Model)  Checks:    - id:          ${window.tealiumCmpIntegration.cmpFetchCurrentLookupKey()}    - well-formed: ${window.tealiumCmpIntegration.cmpCheckForWellFormedDecision(window.tealiumCmpIntegration.cmpFetchCurrentConsentDecision())}    - explicit:    ${window.tealiumCmpIntegration.cmpCheckForExplicitConsentDecision(window.tealiumCmpIntegration.cmpFetchCurrentConsentDecision())}    - group list:  ${JSON.stringify(window.tealiumCmpIntegration.cmpConvertResponseToGroupList(window.tealiumCmpIntegration.cmpFetchCurrentConsentDecision()))}    - name lookup: ${JSON.stringify(window.tealiumCmpIntegration.cmpConvertResponseToLookupObject(window.tealiumCmpIntegration.cmpFetchCurrentConsentDecision()), null, 6)}  `console.log(outputString)</code></pre><h3 id=\"usercentrics\">Usercentrics</h3><p>このスニペットをウェブサイトでテストするには、<a href=\"#how-it-works\">動作原理</a>セクションの手順に従ってください。互換性を確認し、統合に必要な情報を取得します。Usercentricsの統合では、<strong>ベンダー</strong>を<strong>目的</strong>として使用します。</p><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-js\" data-lang=\"js\"><span style=\"display:flex;\"><span>;(<span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">usercentricsBrowserSdkV2</span> (window) {</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// CMP specific functionality and labels</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">||</span> {}</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;Usercentrics Browser SDK&#39;</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpIntegrationVersion</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;usercentrics-1.0.3&#39;</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>window.<span style=\"color:#a6e22e\">UC_UI</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">getServicesBaseInfo</span> <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;function&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">getServicesBaseInfo</span>()</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">cmpRawOutput</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> (window.<span style=\"color:#a6e22e\">UC_UI</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">getSettingsCore</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#e6db74\">&#39;function&#39;</span> <span style=\"color:#f92672\">&amp;&amp;</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">getSettingsCore</span>().<span style=\"color:#a6e22e\">id</span>) <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;&#39;</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// only support opt-In model for Usercentrics for now, can be added if needed</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> window.<span style=\"color:#a6e22e\">UC_UI</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#66d9ef\">typeof</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">isConsentRequired</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#e6db74\">&#39;function&#39;</span> <span style=\"color:#f92672\">&amp;&amp;</span> window.<span style=\"color:#a6e22e\">UC_UI</span>.<span style=\"color:#a6e22e\">isConsentRequired</span>() <span style=\"color:#f92672\">===</span> <span style=\"color:#66d9ef\">true</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">toString</span>.<span style=\"color:#a6e22e\">call</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;[object Array]&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// use the first entry as a proxy for all</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#66d9ef\">typeof</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>[<span style=\"color:#ae81ff\">0</span>].<span style=\"color:#a6e22e\">name</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#e6db74\">&#39;string&#39;</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">true</span></span></span><span style=\"display:flex;\"><span>    }</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">toString</span>.<span style=\"color:#a6e22e\">call</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;[object Array]&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// use the first entry as a proxy for all</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">consentHistory</span> <span style=\"color:#f92672\">=</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>[<span style=\"color:#ae81ff\">0</span>].<span style=\"color:#a6e22e\">consent</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>[<span style=\"color:#ae81ff\">0</span>].<span style=\"color:#a6e22e\">consent</span>.<span style=\"color:#a6e22e\">history</span>) <span style=\"color:#f92672\">||</span> []</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">lastHistoryEntryType</span> <span style=\"color:#f92672\">=</span> (<span style=\"color:#a6e22e\">consentHistory</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">consentHistory</span>.<span style=\"color:#a6e22e\">length</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">consentHistory</span>[<span style=\"color:#a6e22e\">consentHistory</span>.<span style=\"color:#a6e22e\">length</span> <span style=\"color:#f92672\">-</span> <span style=\"color:#ae81ff\">1</span>].<span style=\"color:#a6e22e\">type</span>) <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">lastHistoryEntryType</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#e6db74\">&#39;explicit&#39;</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">true</span></span></span><span style=\"display:flex;\"><span>    }</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>, <span style=\"color:#a6e22e\">tiqGroupName</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">foundOptIn</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// treat things we don&#39;t understand as an opt-out</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">toString</span>.<span style=\"color:#a6e22e\">call</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#e6db74\">&#39;[object Array]&#39;</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// use the mapping if found, with a fallback (Usercentrics default value) if not specified in the mapping</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;tiq-group-name-missing&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// check vendors if there&#39;s an object, look for at least one</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">forEach</span>(<span style=\"color:#66d9ef\">function</span> (<span style=\"color:#a6e22e\">tagInfo</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> ((<span style=\"color:#a6e22e\">tagInfo</span>.<span style=\"color:#a6e22e\">consent</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">tagInfo</span>.<span style=\"color:#a6e22e\">consent</span>.<span style=\"color:#a6e22e\">status</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#66d9ef\">true</span>) <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">tagInfo</span>.<span style=\"color:#a6e22e\">name</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#a6e22e\">tiqGroupName</span>) {</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">foundOptIn</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">true</span></span></span><span style=\"display:flex;\"><span>      }</span></span><span style=\"display:flex;\"><span>    })</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">foundOptIn</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">vendorArray</span> <span style=\"color:#f92672\">=</span> []</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">cmpRawOutput</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">cmpRawOutput</span>.<span style=\"color:#a6e22e\">forEach</span>(<span style=\"color:#66d9ef\">function</span> (<span style=\"color:#a6e22e\">tagConsent</span>) {</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">tagConsent</span>.<span style=\"color:#a6e22e\">consent</span> <span style=\"color:#f92672\">&amp;&amp;</span> <span style=\"color:#a6e22e\">tagConsent</span>.<span style=\"color:#a6e22e\">consent</span>.<span style=\"color:#a6e22e\">status</span> <span style=\"color:#f92672\">===</span> <span style=\"color:#66d9ef\">true</span>) {</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">vendorArray</span>.<span style=\"color:#a6e22e\">push</span>(<span style=\"color:#a6e22e\">tagConsent</span>.<span style=\"color:#a6e22e\">name</span>)</span></span><span style=\"display:flex;\"><span>      }</span></span><span style=\"display:flex;\"><span>    })</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">vendorArray</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span></span></span><span style=\"display:flex;\"><span>})(window)</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">outputString</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">`</span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> - </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span>() <span style=\"color:#f92672\">?</span> <span style=\"color:#e6db74\">&#39;Opt-in&#39;</span> <span style=\"color:#f92672\">:</span> <span style=\"color:#e6db74\">&#39;Opt-out&#39;</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> Model</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">Checks:</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - vendor id:            </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span>()<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - well-formed decision: </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - explicit decision:    </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - consented purposes:   </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">JSON</span>.<span style=\"color:#a6e22e\">stringify</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>()).<span style=\"color:#a6e22e\">sort</span>(),<span style=\"color:#66d9ef\">null</span>, <span style=\"color:#ae81ff\">8</span>)<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">`</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">console</span>.<span style=\"color:#a6e22e\">log</span>(<span style=\"color:#a6e22e\">outputString</span>)</span></span></code></pre></div><h3 id=\"オプトアウトcookie--gpc\">オプトアウトCookie + GPC</h3><p>この統合は、CCPA/CPRAなどの非常にシンプルなオプトアウトモデルをサポートするためのものです。<strong>ベンダーID</strong>フィールドをオプトアウトCookieの名前（大文字と小文字を区別する）と解釈します。ユーザーは、このCookieが任意の値で見つかる場合、または<a href=\"/iq-tag-management/consent-management/global-privacy-control/about/\">Global Privacy Control (GPC)</a>のオプトアウトシグナルが見つかる場合、オプトアウトしたと見なされます。</p><p>統合で使用される<strong>目的キー</strong>とデフォルトの<strong>目的グループ</strong>に含まれるものは次のとおりです。</p><ul><li><code>no-selling</code> - ユーザーのオプトアウトシグナルに関係なく許可するタグ。これらのタグはデータを販売/共有せず、法務チームなどによって厳密に必要とされるものです。</li><li><code>yes-selling</code> - オプトアウトしたユーザーに対してブロックするタグ。該当する規制やポリシーにより、ユーザーがオプトアウトした後のトラッキングが禁止されています。</li></ul><h3 id=\"カスタム統合テンプレート\">カスタム統合テンプレート</h3><p>カスタム統合テンプレートの詳細と使用方法については、<a href=\"/iq-tag-management/consent-integrations/custom-cmp/\">カスタム統合</a>を参照してください。</p>"
        }  

    , 
        {
            "weight": "475",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/validate-and-debug/",
            "title": "同意統合の検証とデバッグ",
            "body":"<h2 id=\"公開前にconsent-integrationsを検証する\">公開前にConsent Integrationsを検証する</h2><p>あなたの同意統合を検証し、デバッグするために、統合テンプレートを他の依存関係なしにサイトのJavaScriptコンソールに貼り付けます。Consent Integrationテンプレートは編集可能で、スタンドアロンで設計されているため、ウェブサイトのコンソールからデバッグが可能です。</p><p>テンプレートは、<a href=\"/iq-tag-management/consent-integrations/custom-cmp/\">カスタム統合の作成</a>に便利であり、また、ベンダーID、目的キーを取得したり、構成前にデフォルトのテンプレートがCMPのインスタンスでカスタマイズなしで動作することを確認するためにも使用できます。現在のテンプレートには、検証スニペットが含まれており、<a href=\"/iq-tag-management/consent-integrations/supported-vendors/\">ドキュメンテーション</a>で提供されています。</p><h2 id=\"公開後にデバッグモードを有効にする\">公開後にデバッグモードを有効にする</h2><p>Tealium iQの<a href=\"/platforms/javascript/debugging/\">デバッグモード</a>は、機能がアクティブである場合、あなたのConsent Integrationsからの詳細なステータスとエラーメッセージを含んでいます。ただし、免除が適用される場合は除きます。免除が適用されると、<code>window.tealiumCmpIntegration</code>が定義され、<code>window.tealiumCmpIntegration.exemptionMap</code>にアクティブな免除が表示されます。</p><p class=\"tip\"><i class=\"fa fa-info-circle\"></i>コンソール出力でのフィルタとして<code>/SENDING|****/</code>を使用して、関連するデバッグメッセージのみを表示します。</p><h2 id=\"公開後にconsent-integrationsを検証する\">公開後にConsent Integrationsを検証する</h2><p>Tealium iQ Consent Integrationsは、DOMに<code>window.tealiumCmpIntegration</code>という名前のグローバルオブジェクトを作成し、デバッグに役立ついくつかのプロパティを持っています。また、デバッグと検証を容易にするために、コンポーネント関数を個別に呼び出すこともできます。コンポーネント関数の詳細については、<a href=\"/iq-tag-management/consent-integrations/custom-cmp/\">カスタムCMP統合</a>を参照してください。</p><h3 id=\"例\">例</h3><p>この例では、CMP統合に関する重要な情報を取得する方法について説明します。</p><p>CMP統合に関する重要な情報を確認し、顧客の決定が正しくキャプチャされていることを確認するために、以下の手順を完了します：</p><ol><li>この<a href=\"https://www.otprivacy.com/user/jmyles/TagManagerDemo/OTKicks_Tealium/index.html?otreset=false&amp;otpreview=true&amp;otgeo=IE\">デモサイト</a>またはアクティブな同意統合がある任意のサイトを訪れ、以下のスニペットをブラウザのコンソールに貼り付けます：<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-js\" data-lang=\"js\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">outputString</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">`</span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> - </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span>() <span style=\"color:#f92672\">?</span> <span style=\"color:#e6db74\">&#39;Opt-in&#39;</span> <span style=\"color:#f92672\">:</span> <span style=\"color:#e6db74\">&#39;Opt-out&#39;</span><span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"> Model</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">Checks:</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - vendor id:            </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span>()<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - well-formed decision: </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - explicit decision:    </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>())<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">  - consented purposes:   </span><span style=\"color:#e6db74\">${</span><span style=\"color:#a6e22e\">JSON</span>.<span style=\"color:#a6e22e\">stringify</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span>()).<span style=\"color:#a6e22e\">sort</span>(),<span style=\"color:#66d9ef\">null</span>, <span style=\"color:#ae81ff\">8</span>)<span style=\"color:#e6db74\">}</span><span style=\"color:#e6db74\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#e6db74\">`</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">console</span>.<span style=\"color:#a6e22e\">log</span>(<span style=\"color:#a6e22e\">outputString</span>)</span></span></code></pre></div></li><li>上記のスニペットをデモサイトのコンソールに貼り付けると、次のような結果が返されます：<pre tabindex=\"0\"><code>OneTrust - Opt-in ModelChecks:  - vendor id:            b38364e4-b2c4-4349-8e4e-48cf28a35db8  - well-formed decision: true  - explicit decision:    false  - consented purposes:   [        &#34;C0001&#34;]</code></pre></li><li>Webページ上で<strong>すべてのクッキーを承諾する</strong>をクリックし、同じスニペットを再度貼り付けます。次の出力は、決定が統合によって正しく理解され、キャプチャされたことを示しています：<pre tabindex=\"0\"><code>OneTrust - Opt-in ModelChecks:  - vendor id:            b38364e4-b2c4-4349-8e4e-48cf28a35db8  - well-formed decision: true  - explicit decision:    true  - consented purposes:   [        &#34;C0001&#34;,        &#34;C0002&#34;,        &#34;C0003&#34;,        &#34;C0004&#34;]</code></pre></li></ol><h2 id=\"公開後に衝突と適用ルールをデバッグする\">公開後に衝突と適用ルールをデバッグする</h2><p><code>window.tealiumCmpIntegrations</code>には、ページ上でどの統合が強制されているかを理解するのに役立ついくつかの便利なプロパティがあります。例えば、<code>loadRules</code>には、どの同意統合が強制され、衝突があったかどうか（これによりTealium iQとすべてのタグがブロックされます）を示す子プロパティがあります。</p><ul><li><code>map</code>と<code>tagBasedMap</code>は、タグUIDとPurpose Keyの間の関係の異なるビューを示します。</li><li><code>tiqGroupName</code>は、Purpose KeyとTealium iQ自体のマッピングを示します。</li><li><code>cmpName</code>は、現在アクティブなCMP（テンプレートによる）を示します。</li><li><code>cmpIntegrationVersion</code>は、使用しているベンダー固有の統合テンプレートの現在のバージョンを示します。</li><li><code>version</code>は、使用している基本的な同意強制フレームワークのバージョンを示します。</li></ul><p>このオブジェクトに含まれる特定の統合機能の詳細については、カスタム統合の作成に関する関連<a href=\"/iq-tag-management/consent-integrations/custom-cmp/\">ドキュメンテーション</a>を参照してください。</p>"
        }  

    , 
        {
            "weight": "480",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/custom-cmp/",
            "title": "同意統合 - カスタムCMP統合",
            "body":"<h2 id=\"動作原理\">動作原理</h2><p>Tealium Consent Integrationsは、2つのパートで構成されています。</p><ul><li>Tealium iQの同意強制フレームワーク（<code>utcm_framework</code>テンプレート）。</li><li>Tealium iQの同意強制フレームワークを活用するCMP固有の統合テンプレート。これらの統合テンプレートは、できるだけ軽量に設計されています。</li></ul><p>当社の<a href=\"/iq-tag-management/consent-integrations/supported-vendors/\">事前構築済みの統合</a>は、さまざまな同意管理プラットフォーム（CMP）との統合をサポートしています。ただし、次の場合にはカスタム統合が推奨されます。</p><ul><li>事前構築済みの統合がないCMPを使用する場合。</li><li>同意をキャプチャするための内部ツールを使用する場合。</li><li>標準の統合を破壊する大幅なカスタマイズが施されたサポートされているCMPを使用する場合。</li></ul><p>このような場合、カスタム統合を使用できます。JavaScript関数を使用することで、どの同意キャプチャツールでも強制フレームワークを活用できます。</p><p>新しいカスタム統合を追加するには、既存の統合と提供されたテンプレートをガイドとして使用します。</p><p>以下は、カスタム統合を作成するための基本的なワークフローの説明です。</p><ol><li>Tealium iQの外部（CMPが実装されているウェブサイト）で統合を開発およびデバッグします。</li><li>Tealium iQで新しいカスタム同意統合と目的グループを追加します。詳細については、<a href=\"/iq-tag-management/consent-integrations/manage/\">同意統合と目的グループの管理</a>を参照してください。</li><li>Tealium iQと適切なタグを目的グループ内の目的に割り当てます。</li><li>テンプレートを作成するためにプロファイルをストレージします。</li><li><a href=\"/iq-tag-management/templates/manage/\">新しく作成したテンプレートを編集</a>します。</li><li>テンプレートを開発環境またはテスト環境に公開して、すべてが予想どおりに動作することを確認し、通常のテストおよび公開フローに従います。</li></ol><h2 id=\"カスタム統合の開発デバッグ検証\">カスタム統合の開発、デバッグ、検証</h2><p>カスタムCMP統合を作成するには、以下の手順を実行します。デバッグは開発中に行います。</p><ol><li><a href=\"#custom-integration-template\">カスタムテンプレート</a>の末尾にある<strong>デバッグ</strong>ブロックのコメントを解除します。</li><li>テンプレートを、サポートするCMPが実行されているウェブサイトのコンソールに貼り付けます。</li><li>デバッグコードブロックが同意の決定を出力します。</li><li>決定をカスタマイズし、テンプレートを再度貼り付けて新しく解釈された同意の決定を確認します。</li><li>テンプレートに満足したら、テンプレートをTealium iQに貼り付けて公開する前に、再度デバッグブロックのコメントを解除します。</li></ol><p>また、プロファイルをストレージし、<a href=\"/iq-tag-management/templates/manage/%7D\">テンプレートを編集</a>することで、デバッグスニペットを見つけることもできます。</p><h3 id=\"公開後の検証\">公開後の検証</h3><p>公開後のテンプレートのデバッグと検証には、デバッグモードまたは<code>window.tealiumCmpOutput</code>オブジェクトを使用する方法があります。</p><h4 id=\"デバッグモードの使用\">デバッグモードの使用</h4><p><a href=\"/platforms/javascript/debugging/\">デバッグモード</a>を使用するには、次の手順を実行します。</p><ul><li>コンソールで<code>document.cookie = &quot;utagdb=true&quot;</code>と入力して、<code>utagdb</code>クッキーを<code>true</code>に構成します。</li><li>コンソールフィルタを構成して、関連する出力のみを表示します（デバッグ出力には推奨されるフィルタが含まれています）。</li><li>予想どおりに動作するかを確認するために、さまざまなオプションをテストします。</li></ul><h4 id=\"windowtealiumcmpoutputオブジェクトの使用\"><code>window.tealiumCmpOutput</code>オブジェクトの使用</h4><p><code>window.tealiumCmpOutput</code>オブジェクトを使用するには、次の手順を実行します。</p><ul><li>テンプレートの末尾にコメントアウトされたデバッグコードブロックをコンソールに貼り付けて、決定と関連する出力のみを表示します。</li><li>必要に応じて、テンプレート内の関数を個別に呼び出したり、このオブジェクトの他の有用なプロパティにアクセスしたりすることもできます。</li></ul><p>事前構築済みおよびカスタム統合の詳細なデバッグのヒントについては、<a href=\"/iq-tag-management/consent-integrations/validate-and-debug/\">同意統合の検証とデバッグ</a>を参照してください。</p><h2 id=\"統合関数\">統合関数</h2><p>統合のCMP固有のコンポーネントは、<code>window.tealiumCmpIntegration</code>オブジェクトを使用して定義されます。</p><p><code>window.tealiumCmpIntegration</code>オブジェクトは、<code>.cmpName</code>、<code>.cmpIntegrationVersion</code>の名前とバージョン、および次の関数から構成されています。</p><h3 id=\"動作モードの判定\">動作モードの判定</h3><ul><li><code>.cmpCheckIfOptInModel</code> - 統合が<code>オプトイン</code>モデルまたは<code>オプトアウト</code>モデルで動作するかを判定します。ブール値を返します。</li></ul><h3 id=\"決定の取得\">決定の取得</h3><ul><li><code>.cmpFetchCurrentConsentDecision</code> - 現在の同意の決定の生のバージョン（CMPからの生のバージョン）を取得します。結果はオブジェクトである必要があり、すべての後続の関数に引数として渡されます。</li></ul><h3 id=\"決定の検証と標準化\">決定の検証と標準化</h3><ul><li><p><code>.cmpCheckForWellFormedDecision</code> - 同意の決定の生のバージョンが正しく形成されて理解可能かどうかをチェックします。ブール値を返します。</p></li><li><p><code>.cmpCheckForTiqConsent</code> - 同意の決定にTealium iQによるデータ処理の許可が含まれているかどうかを判定します。falseの場合、何も実行されません。ブール値を返します。</p></li><li><p><code>.cmpCheckForExplicitConsentDecision</code> - 同意の決定が<code>明示的</code>または<code>暗黙的</code>かどうかを判定します。ブール値を返します。</p></li><li><p><code>.cmpConvertResponseToGroupList</code> - 生の決定を、下流の強制のための許可された目的キーの単純な配列に変換します。同意された目的キーの配列を返します。</p></li></ul><h2 id=\"カスタム統合テンプレート\">カスタム統合テンプレート</h2><p>以下は、独自のカスタム統合を作成するための空のテンプレートです。テンプレートには、同意統合をデバッグおよび検証するために使用できるデバッグスニペットが含まれています。</p><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-js\" data-lang=\"js\"><span style=\"display:flex;\"><span>;(<span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">myCustomConsentIntegration</span> (window) {</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">/**</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * このテンプレートは編集するために用意されており、独自のカスタムCMP / キャプチャツールのサポートを構築するために使用します。</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    *</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * 例のコード（コメントアウトされています）は、オプトアウトクッキーをチェックし、次の2つの決定のいずれかを返す統合から取得されます。</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    *  - [&#39;no-selling&#39;]（任意の値を持つオプトアウトクッキーが見つかった場合） - 常に明示的な決定（オプトアウトクッキーが構成されています）</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    *  - [&#39;no-selling&#39;, &#39;yes-selling&#39;]（オプトアウトクッキーが見つからない場合） - 常に暗黙的な決定（クッキーが構成されていません）</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    *</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * オプトアウトクッキーの（大文字と小文字を区別する）名前は、UIの「ベンダーID」フィールドから取得されます。</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    *</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * 詳細については、https://docs.tealium.com/iq-tag-management/consent-integrations/supported-vendors/#opt-out-cookie--gpc を参照してください。</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * </span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    * （上記の統合は、この例のために簡略化されており、GPCロジックは削除されています）</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// CMP固有の機能とラベル</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">=</span> window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span> <span style=\"color:#f92672\">||</span> {}</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;カスタム例&#39;</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpIntegrationVersion</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#39;v1.0.0&#39;</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span></span></span><span style=\"display:flex;\"><span>  window.<span style=\"color:#a6e22e\">tealiumCmpIntegration</span>.<span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  // UIの単一の関連統合の「ベンダーID」で入力されたものを取得します</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  var optOutCookieName = (window.tealiumCmpIntegration &amp;&amp; window.tealiumCmpIntegration.map &amp;&amp; Object.keys(window.tealiumCmpIntegration.map)[0]) || &#39;error-no-map-found-so-no-cookie-name-available&#39;</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  */</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// CMPが「オプトイン」モデル（GDPRスタイル）で実行されている場合はtrueを返す必要があります</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// このオプトアウトクッキーの例は、オプトアウトモデル（CCPA/CPRAスタイル）のみをサポートしているため、ハードコードされたfalseを返します。</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckIfOptInModel</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return false</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 必要な情報を含む、CMP固有の生のオブジェクト（オブジェクトである必要があります）を返す必要があります</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// この出力は、後続の関数のcmpRawOutput引数として使用されます</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentConsentDecision</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    // ここではタグマネージャの機能を使用できないため、クッキーを読み取る関数を定義します</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    var readCookie = function (name) {</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      var reString = &#39;(?:(?:^|.*;\\s*)&#39; + name + &#39;\\s*\\=\\s*([^;]*).*$)|^.*$&#39;</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      var re = new RegExp(reString)</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      var cookieValue = document.cookie.replace(re, &#39;$1&#39;)</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      if (!cookieValue) return undefined</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      return cookieValue</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    }</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    var cookie = readCookie(optOutCookieName) || &#39;opt-out-cookie-not-found&#39;</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return { cookieState: cookie } // 統合が機能するためにはオブジェクトを返さなければならないため、他のプロパティ（例：Global Privacy Control）を追加できます</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Tealium iQが正しいCMP構成を持っていることを確認するための文字列を返す必要があります</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpFetchCurrentLookupKey</span> () {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return optOutCookieName</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// ブール値を返す必要があります - 生の決定がCMPの期待に合致している場合はtrue</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return typeof cmpRawOutput === &#39;object&#39; &amp;&amp; typeof cmpRawOutput.cookieState === &#39;string&#39;</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// ブール値を返す必要があります - 同意の決定がユーザーによって明示的に行われた場合はtrue</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForExplicitConsentDecision</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    // この例では、決定が明示的かどうかを判断する唯一の方法は、オプトアウトクッキーが構成されているかどうかを確認することです</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    if ((typeof cmpRawOutput === &#39;object&#39; &amp;&amp; typeof cmpRawOutput.cookieState === &#39;string&#39; &amp;&amp; cmpRawOutput.cookieState !== &#39;opt-out-cookie-not-found&#39;)) return true</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return false</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 同意されたベンダー/目的の配列を返す必要があります - これらはTealium iQの目的と完全に一致する必要があります</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    var consentDecision = [&#39;no-selling&#39;] // データを販売/共有しないタグは常に許可されます</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    // セルデータを販売するタグが許可されているかどうかを判断するための非常にシンプルなオプトアウトクッキーのチェック</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    if (cmpRawOutput.cookieState === &#39;opt-out-cookie-not-found&#39;) {</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      consentDecision.push(&#39;yes-selling&#39;) // クッキーが見つからないため、データの販売/共有は問題ないと仮定する必要があります</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    }</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    return consentDecision</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    */</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// この関数やそれ以下の部分を変更する必要はありません</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">function</span> <span style=\"color:#a6e22e\">cmpCheckForTiqConsent</span> (<span style=\"color:#a6e22e\">cmpRawOutput</span>, <span style=\"color:#a6e22e\">tiqGroupName</span>) {</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// 理解できないものはオプトアウトとして扱います</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">cmpCheckForWellFormedDecision</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#66d9ef\">true</span>) <span style=\"color:#66d9ef\">return</span> <span style=\"color:#66d9ef\">false</span></span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">tiqGroupName</span> <span style=\"color:#f92672\">||</span> <span style=\"color:#e6db74\">&#39;tiq-group-name-missing&#39;</span></span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">var</span> <span style=\"color:#a6e22e\">allowedGroups</span> <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">cmpConvertResponseToGroupList</span>(<span style=\"color:#a6e22e\">cmpRawOutput</span>)</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">allowedGroups</span>.<span style=\"color:#a6e22e\">indexOf</span>(<span style=\"color:#a6e22e\">tiqGroupName</span>) <span style=\"color:#f92672\">!==</span> <span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span></span></span><span style=\"display:flex;\"><span>  }</span></span><span style=\"display:flex;\"><span>})(window)</span></span><span style=\"display:flex;\"><span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  // デバッグ/開発出力 - このブロックのコメントを解除し、テストページにこのテンプレート全体を貼り付け/再貼り付けします</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  var outputString = `${tealiumCmpIntegration.cmpCheckIfOptInModel() ? &#39;オプトイン&#39; : &#39;オプトアウト&#39;} モデル</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  チェック:</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    - id:          ${tealiumCmpIntegration.cmpFetchCurrentLookupKey()}</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    - well-formed: ${tealiumCmpIntegration.cmpCheckForWellFormedDecision(tealiumCmpIntegration.cmpFetchCurrentConsentDecision())}</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    - explicit:    ${tealiumCmpIntegration.cmpCheckForExplicitConsentDecision(tealiumCmpIntegration.cmpFetchCurrentConsentDecision())}</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    - group list:  ${JSON.stringify(tealiumCmpIntegration.cmpConvertResponseToGroupList(tealiumCmpIntegration.cmpFetchCurrentConsentDecision()))}</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  `</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  console.log(outputString);</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span></span></span></code></pre></div>"
        }  

    , 
        {
            "weight": "485",
            "url": "https://docs-preview.tealium.co.jp/iq-tag-management/consent-integrations/enforcement-conditions-conflict/",
            "title": "実施条件の競合の取り扱い",
            "body":"<h2 id=\"プライバシー原則\">プライバシー原則</h2><p>あなたのビジネスのデータ活用が関連するポリシーや規制を遵守し、ユーザーエラーや誤構成によるデータ漏洩を防ぐために、私たちはConsent Integrationsをプライバシーバイデザインとプライバシーバイデフォルトの原則を厳格に遵守して構築しました。これらの原則は、データの処理と活用が明確な同意または明確な条件が満たされた場合にのみ許可されることを要求します。</p><h2 id=\"consent-integrationsが実施条件の競合をどのように取り扱うか\">Consent Integrationsが実施条件の競合をどのように取り扱うか</h2><ul><li><p><strong>少なくとも1つのConsent Integrationまたは免除がアクティブな場合</strong>：あなたの同意管理プラットフォーム（CMP）からの特定の信号がなければ、データの処理は許可されません。</p></li><li><p><strong>2つ以上の実施ルールがインテグレーションで重複する場合</strong>：Tealium iQはロードされず、タグは発火しません。</p></li><li><p><strong>免除は重複してもよい</strong>：単一のIntegrationが任意の数のExemptionsと重複する場合、Integrationが強制され、Exemptionsは無視されます。</p></li></ul><p class=\"note\"><i class=\"fa fa-exclamation-triangle\"></i>曖昧なシナリオ、例えば2つのインテグレーションが存在し、その両方の実施ルールが<code>true</code>に評価される場合などでは、Consent Integrationsは潜在的なデータ漏洩を防ぐためにデータの処理と活用を控えます。これはブロックされたタグからのデータの損失を招く可能性がありますが、データ漏洩のリスクを軽減するための予防措置です。</p><p>以下の表は、アクティブな免除とインテグレーションの数に応じて、Consent Integrationsが競合をどのように取り扱うかを示しています：</p><table><thead><tr><th><strong>免除</strong></th><th><strong>インテグレーション</strong></th><th><strong>競合の取り扱い</strong></th></tr></thead><tbody><tr><td>0</td><td>0</td><td>すべてのデータ処理をブロック</td></tr><tr><td>1</td><td>0</td><td>すべてのデータ処理を許可</td></tr><tr><td>&gt;1</td><td>0</td><td>すべてのデータ処理を許可</td></tr><tr><td>0</td><td>1</td><td>目的特定のブロックを適用</td></tr><tr><td>1</td><td>1</td><td>目的特定のブロックを適用</td></tr><tr><td>&gt;1</td><td>1</td><td>目的特定のブロックを適用</td></tr><tr><td>0</td><td>&gt;1</td><td>すべてのデータ処理をブロック</td></tr><tr><td>1</td><td>&gt;1</td><td>すべてのデータ処理をブロック</td></tr><tr><td>&gt;1</td><td>&gt;1</td><td>すべてのデータ処理をブロック</td></tr></tbody></table>"
        }  

    ]
}
